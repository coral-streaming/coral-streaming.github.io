<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Coral</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <script src="/lib/jquery/jquery-1.11.2.min.js"></script>
    <script src="/lib/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/custom.css" type="text/css">
    <link rel="stylesheet" href="/css/syntax.css" type="text/css">
</head>
<body>
	<div class="header"></div>
	
    <div id="toplinks">
		<div style="height: 35px"><a href="/Documentation-ApiReference.html">API Reference</a></div>
		<div style="height: 35px"><a href="/GettingStarted-Download.html">Download</a></div>
		<div><a href="/">About</a></div>
	</div>
	
    <div class="container">
        <div class="row content">
            <div class="col-md-3 menu" style="text-align: right; margin-left: -150px">
            
            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3>Overview</h3>
            	        </div>
                	</div>
	                
    	            
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-Architecture.html">
	                        	
                	        			Architecture
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-ActorOverview.html">
	                        	
        	                			Actor Overview
        	                		
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-Technologies.html">
	                        	
                	        			Technologies
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-Roadmap.html">
	                        	
                	        			Roadmap
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-History.html">
	                        	
                	        			History
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
                	
	            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3>Getting started</h3>
            	        </div>
                	</div>
	                
    	            
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-Prerequisites.html">
	                        	
                	        			Prerequisites
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-Download.html">
	                        	
                	        			Download
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-HelloWorld.html">
	                        	
                	        			Hello World
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-HelloWorldKafka.html">
	                        	
                	        			Hello World with Kafka
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-Examples.html">
	                        	
                	        			Examples
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
                	
	            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3>Documentation</h3>
            	        </div>
                	</div>
	                
    	            
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-ApiReference.html">
	                        	
                	        			API Reference
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-ActorReference.html">
	                        	
        	                			Actor Reference
            	            		
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-CommandLineArguments.html">
	                        	
                	        			Command line parameters
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-Configuration.html">
	                        	
                	        			Configuration Reference
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
                	
	            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3></h3>
            	        </div>
                	</div>
	                
    	            
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
                	
	            
            	
	            
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
            </div>
            <div class="col-md-7 tableborder" style="margin-top: 50px; ">
                <!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<h3 id="create-a-new-runtime">Create a new runtime</h3>

<div class="alert alert-info" role="alert"><strong>POST</strong> /api/runtimes</div>

<p>Creates a new runtime on the platform. A runtime contains actors and links between those actors.</p>

<div class="alert alert-warning" role="alert">
  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
  <span class="sr-only">Warning</span>
  <strong>NOTE</strong>:&nbsp;This call does not actually start the runtime, but only instantiates it.<br />To start it, look <a href="API-PATCH-runtime.html">here</a>.
</div>

<h3 id="json-input">JSON input</h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
  <span class="err">(</span><span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="err">string</span> <span class="err">or</span> <span class="err">UUID)</span><span class="p">,</span>
  <span class="err">(</span><span class="nt">&quot;projectid&quot;</span><span class="p">:</span> <span class="err">UUID)</span><span class="p">,</span>
  <span class="nt">&quot;actors&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="err">&lt;actor_def&gt;</span><span class="p">,</span> <span class="err">...</span>
  <span class="p">],</span> <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="err">&lt;link_def&gt;</span><span class="p">,</span> <span class="err">...</span>
  <span class="p">],</span> 
  <span class="err">(</span><span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="err">&lt;distribution&gt;</span>
  <span class="p">}</span><span class="err">)</span>
<span class="p">}</span>

<span class="err">&lt;actor_def&gt;:</span>
<span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
  <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="err">&lt;actor_params&gt;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="err">&lt;link_def&gt;:</span> 
<span class="p">{</span>
  <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span> <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="err">string</span>
<span class="p">}</span>

<span class="err">&lt;distribution&gt;:</span>
<span class="p">{</span>
  <span class="nt">&quot;mode&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
  <span class="err">(</span><span class="nt">&quot;machine&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;ip&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
    <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="err">int</span>
  <span class="p">}</span><span class="err">)</span>
<span class="p">}</span></code></pre></figure>

<p>The “owner” field is optional, and can be either the unique name of the user or an UUID. If no owner field is provided, the current owner is assumed. When “accept-all” authentication is used, a user with the name “coral” is assumed. If the specified owner is not equal to the currently logged in user, the request is rejected. This may be changed in future releases, when a runtime on behalf of another user can be created.</p>

<p>The projectid is optional and is a planned future feature of the Coral platform. Currently, it is not used. The “actors” section contains actor definitions, which can be found in the <a href="Overview-ActorOverview.html">Actor Overview</a>. The “links” section contains all links between actors. The names mentioned in “from” and “to” must be existing names in the actor definition section.</p>

<p>The distribution specification is optional and specifies the distribution mechanism of the runtime on the Coral platform. The mode field can be any of ones specified <a href="Overview-Architecture#distribution">here</a>.
The “machine” field is only necessary when the “predefined” mode is used. If no distribution section is present, the platform distribution settings will be used.</p>

<h3 id="example">Example</h3>

<div class="alert alert-info" role="alert"><strong>POST</strong> /api/runtimes</div>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;runtime1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;neo&quot;</span><span class="p">,</span>
  <span class="nt">&quot;actors&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generator1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generator&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;field1&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, world!&quot;</span>
        <span class="p">},</span> <span class="nt">&quot;timer&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;log1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/runtime1.log&quot;</span>
      <span class="p">}</span>
  <span class="p">}],</span> <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;generator1&quot;</span><span class="p">,</span> <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;log1&quot;</span> <span class="p">}</span>
  <span class="p">],</span> 
  <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;predefined&quot;</span><span class="p">,</span>
      <span class="nt">&quot;machine&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;ip&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="mi">2551</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="json-output">JSON output</h3>

<p>When successful:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;created&quot;</span><span class="p">:</span> <span class="err">datetime</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="err">UUID</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="err">json</span>
<span class="p">}</span></code></pre></figure>

<p>The platform returns the time of creation of the runtime, a unique identifier for the created runtime and the definition that you have posted.</p>

<p>On failure:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;reason&quot;</span><span class="p">:</span> <span class="err">string</span><span class="p">,</span>
  <span class="nt">&quot;details&quot;</span><span class="p">:</span> <span class="err">string</span>
<span class="p">}</span></code></pre></figure>

<p>When the API call fails, the platform returns the reason of the failure and a stack trace of the failure.</p>

<h3 id="example-1">Example</h3>

<p>When successful:</p>

<div class="alert alert-success">201 Created</div>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-12-29T15:39:51&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5572fdda-34a4-4d8f-8a6a-77ae36e1e3e5&quot;</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="err">&lt;json</span> <span class="err">definition&gt;</span>
<span class="p">}</span></code></pre></figure>

<p>On failure:</p>

<div class="alert alert-danger">503 Bad request</div>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;reason&quot;</span><span class="p">:</span> <span class="s2">&quot;Owner with name neo not found.&quot;</span>
  <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;stacktrace&gt;&quot;</span>
<span class="p">}</span></code></pre></figure>

<h3 id="errors">Errors</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: right">status code</th>
      <th style="text-align: left">description</th>
      <th style="text-align: left">reason</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right"><code>401</code></td>
      <td style="text-align: left">Unauthorized</td>
      <td style="text-align: left">The user in the HTTP Basic Auth header is not the same as the owner in the runtime definition.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>503</code></td>
      <td style="text-align: left">Bad request</td>
      <td style="text-align: left">The runtime definition is invalid. This can have several reasons.</td>
    </tr>
    <tr>
      <td style="text-align: right"><code>500</code></td>
      <td style="text-align: left">Internal server error</td>
      <td style="text-align: left">There are several reasons an internal server error can be thrown. Check the stack trace of the resulting error code. If you cannot fix the error, please notify us so that we can investigate further.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h4 id="invalid-runtime-definition">Invalid runtime definition</h4>

<p>A runtime definition can be invalid for several reasons:</p>

<ul>
  <li>There is no valid actors section present. The “actors” array field is missing in your JSON definition. Make sure you have an “actors” section in your definition.</li>
  <li>There are no actors present in the actors section. The “actors” array field is present in your JSON definition, but it does not contain any actor definitions. Make sure that the “actors” section is not empty.</li>
  <li>There are actors without names. Make sure that each actor has a “name” field.</li>
  <li>The configuration does not have a runtime name specified in the “name” field. Make sure the “name” field in the top level of the JSON object is present.</li>
  <li>There are actors with duplicate names. Make sure that every actor has a unique name.</li>
  <li>There are invalid actor definitions. Check each actor definition against the specification of that actor.</li>
  <li>There is no valid links section present. Make sure a “links” section is present in the definition.</li>
  <li>There are no links present in the links section. The “links” section is present, but the array is empty. Make sure that the “links” section contains at least one link.</li>
  <li>There are links without a “from” and “to” attribute. Each link should have both a “from” and a “to” field.</li>
  <li>Not all actors mentioned in the links are actual actor names in the configuration. Make sure that all actors mentioned in the links section are defined in the actor section. The “from” or “to” field should match the “name” section of exactly one actor.</li>
  <li>There are actors which are not being referenced in any from or to field of the links section. Make sure that each actor is connected at least once.</li>
  <li>There are actors with types which do not refer to any existing actor (see <a href="Overview-ActorOverview.html">Actor Overview</a>). Make sure each actor type refers to an actually existing actor.</li>
</ul>

<p>If you encounter any of these errors, check your runtime definition carefully and submit your runtime again if you have fixed the errors.</p>

            </div>
        </div>
    </div>
    
    <div class="footer"></div>
    <div id="bottomlinks">
    		<div><a href="https://github.com/coral-streaming/coral">GitHub</a></div>
    		<div><a href="https://groups.google.com/d/forum/coral-streaming">Google Groups</a></div>
    		<div><a href="mailto:stevenraemaekers@gmail.com">Contact</a></div>
    		<div><a href="Contribute.html">Contribute</a></div>
    		<div><a href="FAQ.html">FAQ</a></div>
			<br>
    		<br>
    		<div>&copy; 2015-2016 Steven Raemaekers.<br>Website design by Steven Raemaekers.</div>
    		<div>Coral real-time streaming analytics is open source and available under the Apache 2 license.</div>
    </div>
</body>
</html>
