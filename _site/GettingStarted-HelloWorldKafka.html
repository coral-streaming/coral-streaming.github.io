<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Coral</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <script src="/lib/jquery/jquery-1.11.2.min.js"></script>
    <script src="/lib/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/custom.css" type="text/css">
    <link rel="stylesheet" href="/css/syntax.css" type="text/css">
</head>
<body>
	<div class="header"></div>
	
    <div id="toplinks">
		<div style="height: 35px"><a href="/Documentation-ApiReference.html">API Reference</a></div>
		<div style="height: 35px"><a href="/GettingStarted-Download.html">Download</a></div>
		<div><a href="/">About</a></div>
	</div>
	
    <div class="container">
        <div class="row content">
            <div class="col-md-3 menu" style="text-align: right; margin-left: -150px">
            
            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3>Overview</h3>
            	        </div>
                	</div>
	                
    	            
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-Architecture.html">
	                        	
                	        			Architecture
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-ActorOverview.html">
	                        	
        	                			Actor Overview
        	                		
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-Technologies.html">
	                        	
                	        			Technologies
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-Roadmap.html">
	                        	
                	        			Roadmap
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Overview-History.html">
	                        	
                	        			History
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
                	
	            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3>Getting started</h3>
            	        </div>
                	</div>
	                
    	            
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-Prerequisites.html">
	                        	
                	        			Prerequisites
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-Download.html">
	                        	
                	        			Download
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-HelloWorld.html">
	                        	
                	        			Hello World
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-HelloWorldKafka.html">
	                        	
                	        			Hello World with Kafka
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/GettingStarted-Examples.html">
	                        	
                	        			Examples
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
                	
	            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3>Documentation</h3>
            	        </div>
                	</div>
	                
    	            
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-StateCalculation.html">
	                        	
                	        			State calculation
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-ApiReference.html">
	                        	
                	        			API Reference
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-ActorReference.html">
	                        	
        	                			Actor Reference
            	            		
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-CommandLineArguments.html">
	                        	
                	        			Command line parameters
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
        	            
            	            <div class="row">
                	        <div class="col-md-12">
                    	    <a href="/Documentation-Configuration.html">
	                        	
                	        			Configuration Reference
                    	    	
							</a>
    	                    </div>
        	                </div>
            	        
                	
                	
	            
            	
	                <div class="row">
    	                <div class="col-md-12">
        	                <h3></h3>
            	        </div>
                	</div>
	                
    	            
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
        	            
                	
                	
	            
            	
	            
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
	            <br>
            </div>
            <div class="col-md-7 tableborder" style="margin-top: 50px; ">
                <!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<h2 id="hello-world-with-kafka">Hello World with Kafka</h2>

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#kafka">Kafka</a></li>
  <li><a href="#startplatform">Start the platform</a></li>
  <li><a href="#setupfirstruntime">Set up the first runtime</a></li>
  <li><a href="#startfirstruntime">Start the first runtime</a></li>
  <li><a href="#setupsecondruntime">Create the second runtime</a></li>
  <li><a href="#startsecondruntime">Start the second runtime</a></li>
  <li><a href="#investigateoutput">Investigate the output</a></li>
</ul>

<p><br /></p>

<h3 id="a-nameintroductionaintroduction"><a name="introduction"></a>Introduction</h3>

<p>This is a complete example how to start the platform, create a pipeline that writes data to Kafka, create another pipeline that reads data from Kafka and writes text to a file.</p>

<div class="alert alert-warning" role="alert">
  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
  <span class="sr-only">Note</span>
  <strong>NOTE</strong>: For an easier introductory example of setting up a Coral pipeline, look <a href="GettingStarted-HelloWorld.html">here</a>.
</div>

<p>In this tutorial, we will create the following setup:</p>

<p><img src="img/tutorial-kafka.png" />
<br /></p>

<hr />

<h3 id="a-namekafkaakafka"><a name="kafka"></a>Kafka</h3>

<p>We put data on Kafka ourselves so we can read from it in the second pipeline. Obviously, this example is a bit contrived, but it demonstrates how to read and write from Kafka in the format we need.</p>

<p>As before, we assume that you have downloaded and extracted the Coral platform on your machine, and that Cassandra is running. In this tutorial, we assume that you use the latest version of the Coral platform. We will also assume that you use <code>curl</code> to send commands to Coral. As stated in the section <a href="GettingStarted-Prerequisites.html">Prerequisites</a>, however, you can use any HTTP client you want.</p>

<p>To get Kafka running on your machine, download it <a href="http://kafka.apache.org/downloads.html">here</a>. 
Download the latest version in .tar.gz format and extract it into a folder on your machine. 
Assuming you have downloaded version 0.9.0.0, execute the following commands:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">tar -xzf kafka_2.11-0.9.0.0.tgz
<span class="nb">cd </span>kafka_2.11-0.9.0.0
bin/zookeeper-server-start.sh config/zookeeper.properties
bin/kafka-server-start.sh config/server.properties
bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor <span class="m">1</span> --partitions <span class="m">1</span> --topic <span class="nb">test</span></code></pre></figure>

<p>We now have a Kafka topic “test” running which can be written to at localhost:2181.</p>

<p>We will assume that you have created a user “neo” as in the previous “Hello, world” example.</p>

<hr />

<h3 id="a-namestartplatformastart-the-platform"><a name="startplatform"></a>Start the platform</h3>

<p>To start the platform, enter the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">java -cp <span class="s2">&quot;coral-runtime-0.0.131.jar&quot;</span> <span class="se">\</span>
    io.coral.api.Boot start <span class="se">\</span>
    -ai <span class="s2">&quot;0.0.0.0&quot;</span> -p <span class="m">8000</span> -ah <span class="s2">&quot;127.0.0.1&quot;</span> <span class="se">\</span>
    -ap <span class="m">2551</span> -am <span class="s2">&quot;coral&quot;</span> -ccp <span class="s2">&quot;192.168.100.101&quot;</span> <span class="se">\</span>
    -cp <span class="m">9042</span> -k <span class="s2">&quot;coral&quot;</span> -nc -ll INFO</code></pre></figure>

<p><br />
To test whether the platform runs correctly, issue the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
    --request GET <span class="se">\</span>
    --user neo:thematrix <span class="se">\</span>
    http://127.0.0.1:8000/api/runtimes</code></pre></figure>

<p>The platform will respond with</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">[]</span></code></pre></figure>

<p>This is a JSON array showing the runtimes currently running on the platform. As there are no runtimes on the platform yet, it returns an empty array.</p>

<hr />

<h3 id="a-namesetupfirstruntimeaset-up-the-first-runtime"><a name="setupfirstruntime"></a>Set up the first runtime</h3>

<p>We will set up a runtime with a <a href="Actors-GeneratorActor.html">generator actor</a> and a <a href="Actors-KafkaProducerActor.html">kafka producer actor</a> that writes the generated data to file. The definition of the runtime is as follows:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;runtime1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;projectid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;actors&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generator1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generator&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;field1&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, world!&quot;</span>
        <span class="p">},</span> <span class="nt">&quot;timer&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;kafkaproducer1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;kafka-producer&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;topic&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
        <span class="nt">&quot;kafka&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;metadata.broker.list&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost:9092&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}],</span> <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;generator1&quot;</span><span class="p">,</span> <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;kafkaproducer1&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<p>This is the first part of the pipeline that generates data and sends it to Kafka. This runtime generates the text “Hello, world!” 10 times per second and writes the output to the Kafka topic “test” until it is stopped.</p>

<p>To create the runtime, send the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
    --user neo:thematrix <span class="se">\</span>
    --request POST  <span class="se">\</span>
    --data <span class="s1">&#39;{ &quot;name&quot;: &quot;runtime1&quot;, &quot;owner&quot;: &quot;neo&quot;, &quot;actors&quot;: [{ &quot;name&quot;: &quot;generator1&quot;, &quot;type&quot;: &quot;generator&quot;, &quot;params&quot;: { &quot;format&quot;: { &quot;field1&quot;: &quot;Hello, world!&quot; }, &quot;timer&quot;: { &quot;rate&quot;: 10 }}}, { &quot;name&quot;: &quot;log1&quot;, &quot;type&quot;: &quot;log&quot;, &quot;params&quot;: { &quot;file&quot;: &quot;/tmp/runtime1.log&quot; }}], &quot;links&quot;: [ { &quot;from&quot;: &quot;generator1&quot;, &quot;to&quot;: &quot;log1&quot; }]}&#39;</span> <span class="se">\</span>
http://127.0.0.1:8000/api/runtimes</code></pre></figure>

<p>The platform responds by returning the following information:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-12-25T12:06:45.731&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;20acd9ca-2532-433d-9be2-83608f7f2686&quot;</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;runtime1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;fb7ee9d5-2ee1-4c63-9a95-2edb7f4f7c04&quot;</span><span class="p">,</span>
    <span class="nt">&quot;projectid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;actors&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generator1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generator&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;field1&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, world!&quot;</span>
        <span class="p">},</span> <span class="nt">&quot;timer&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;log1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
        <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/runtime1.log&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">],</span> <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;generator1&quot;</span><span class="p">,</span> <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;log1&quot;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The UUID’s and the created time in your response may vary from the ones shown here.
The runtime has now been created.</p>

<hr />

<h3 id="a-namestartfirstruntimeastart-the-first-runtime"><a name="startfirstruntime"></a>Start the first runtime</h3>

<p>The runtime is now created but is not started yet. To start the runtime, issue a PATCH commmand as follows:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
    --user neo:thematrix <span class="se">\</span>
    --request PATCH <span class="se">\</span>
    --data <span class="s1">&#39;{ &quot;status&quot;: &quot;start&quot; }&#39;</span> <span class="se">\</span>
    http://127.0.0.1:8000/api/runtimes/runtime1</code></pre></figure>

<p>The platform responds with:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;Start runtime&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;runtime1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;neo&quot;</span><span class="p">,</span>
    <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-12-29T16:21:58.752&quot;</span>
<span class="p">}</span></code></pre></figure>

<p>The start time in your response may vary from the one shown here. The runtime is now started and will generate a “Hello, World!” every second. You can check with the following command that the data actually arrives in Kafka (this command should be executed in the Kafka directory):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic <span class="nb">test</span> --from-beginning</code></pre></figure>

<hr />

<h3 id="a-namesetupsecondruntimeacreate-the-second-runtime"><a name="setupsecondruntime"></a>Create the second runtime</h3>

<p>To listen to the Kafka events that we are generating, we create a second runtime.
To do this, we are going to create another runtime with the following definition:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;runtime2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;projectid&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;actors&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;kafkaconsumer1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;kafka-consumer&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;topic&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
        <span class="nt">&quot;kafka&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;zookeeper.connect&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost:2181&quot;</span><span class="p">,</span>
          <span class="nt">&quot;group.id&quot;</span><span class="p">:</span> <span class="s2">&quot;runtime2&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;log1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span>
      <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;/tmp/runtime2.log&quot;</span>
      <span class="p">}</span>
    <span class="p">}],</span> <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;kafkaconsumer1&quot;</span><span class="p">,</span> <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;log1&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span></code></pre></figure>

<p>To create this second runtime, issue the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
	-H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
	--user neo:thematrix <span class="se">\</span>
	--request POST <span class="se">\</span>
	--data <span class="s1">&#39;{ &quot;name&quot;: &quot;runtime2&quot;, &quot;owner&quot;: &quot;neo&quot;, &quot;actors&quot;: [{ &quot;name&quot;: &quot;kafkaconsumer1&quot;, &quot;type&quot;: &quot;kafka-consumer&quot;, &quot;params&quot;: { &quot;topic&quot;: &quot;test&quot;, &quot;kafka&quot;: { &quot;zookeeper.connect&quot;: &quot;localhost:2181&quot;, &quot;group.id&quot;: &quot;runtime2&quot; }}}, { &quot;name&quot;: &quot;log1&quot;, &quot;type&quot;: &quot;log&quot;, &quot;params&quot;: { &quot;file&quot;: &quot;/tmp/runtime2.log&quot; }}], &quot;links&quot;: [{ &quot;from&quot;: &quot;kafkaconsumer1&quot;, &quot;to&quot;: &quot;log1&quot; }]}&#39;</span> <span class="se">\</span>
http://127.0.0.1:8000/api/runtimes</code></pre></figure>

<hr />

<h3 id="a-namestartsecondruntimeastart-the-second-runtime"><a name="startsecondruntime"></a>Start the second runtime</h3>

<p>To start the second runtime, issue the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">curl -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
    --user neo:thematrix <span class="se">\</span>
    --request PATCH <span class="se">\</span>
    --data <span class="s1">&#39;{ &quot;status&quot;: &quot;start&quot; }&#39;</span> <span class="se">\</span>
    http://127.0.0.1:8000/api/runtimes/runtime1</code></pre></figure>

<hr />

<h3 id="a-nameinvestigateoutputainvestigate-the-output"><a name="investigateoutput"></a>Investigate the output</h3>

<p>The file “/tmp/runtime2.log” should not contain the following:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">{</span> <span class="s2">&quot;field1&quot;</span>: <span class="s2">&quot;Hello, World!&quot;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&quot;field1&quot;</span>: <span class="s2">&quot;Hello, World!&quot;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&quot;field1&quot;</span>: <span class="s2">&quot;Hello, World!&quot;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&quot;field1&quot;</span>: <span class="s2">&quot;Hello, World!&quot;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&quot;field1&quot;</span>: <span class="s2">&quot;Hello, World!&quot;</span> <span class="o">}</span>
<span class="o">{</span> <span class="s2">&quot;field1&quot;</span>: <span class="s2">&quot;Hello, World!&quot;</span> <span class="o">}</span>
...</code></pre></figure>

<p>And that’s it! Our “Hello, world” example using Kafka.</p>

            </div>
        </div>
    </div>
    
    <div class="footer"></div>
    <div id="bottomlinks">
    		<div><a href="https://github.com/coral-streaming/coral">GitHub</a></div>
    		<div><a href="https://groups.google.com/d/forum/coral-streaming">Google Groups</a></div>
    		<div><a href="mailto:stevenraemaekers@gmail.com">Contact</a></div>
    		<div><a href="Contribute.html">Contribute</a></div>
    		<div><a href="FAQ.html">FAQ</a></div>
			<br>
    		<br>
    		<div>&copy; 2015-2016 Steven Raemaekers.<br>Website design by Steven Raemaekers.</div>
    		<div>Coral real-time streaming analytics is open source and available under the Apache 2 license.</div>
    </div>
</body>
</html>
